### Paxos学习笔记

Paxos算法使用来解决一致性问题的，何为一致性问题？考虑一种场景，一组进程p1,p2,p3...pn,一个变量v,所谓的一致性问题就是，如何让这组进程就变量v
的值达成一致。为了解释何谓达成一直，考虑如下情形：  
p1令v=a,p2令v=b,那么显然进程p1和p2就v的值并没有达成一致，如果领p2令v=a，那么人为p1,p2就v的值达成一致。


一个重要的性质，叫做法定集合性质(Quroum),我们将一个超过半数的集合成为法定集合，比如1,2,3,4,5共5个元素，{1,2,3}有三个元素就是法定集合。**法定集合性质：任意两个法定集合，必定存在一个公共成员；这个性质是Paxos的基石。**  

算法中分为两个角色：  
* Proposer
* Acceptor

算法步骤：  

一个Proposer向Acceptor们预提交一个提议，如果Acceptor当前的Propose_id
<该提议的Propose_id,则接受该预提议，并更新当前Acceptor的prosoe_id为该提议的Propose_id,同时返回该Acceptor当前的值。当一个法定集合的Acceptor接受了Proposer的预提议，则认为该预提议是成功的。  

Proposer预提交成功后的下一个步骤是真正的提交，该提交包括proposer_id,以及要提交的值。如果上次预提交所有法定集合内的Acceptor的值都为空，那么
这次提交的值则是该Proposer期望提交的值，否则，需要提交法定集合Acceptor中proposer_id最大的值。当写成功达到半数以上时，认为写成功，同时也就决定了最终的值。


*注意*  
一个Acceptor的值只能设置一次，设置过后就不能再更改。这就是预提交的原因，不然后面来的proposer_id总会覆盖面的值。
